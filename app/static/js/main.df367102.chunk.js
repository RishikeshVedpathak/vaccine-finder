(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],{108:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a,i=n(23),c=n(0),r=n.n(c),o=n(14),s=n.n(o),l=(n(108),n(22)),u=n.n(l),d=n(29),j=n(172),b=n(89),f=function(t,e){return Object(b.a)(t,e)},p=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict","?district_id=").concat(e,"&date=").concat(n),{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),O=n(36),h=function(t,e){var n;return(null===t||void 0===t||null===(n=t.sessions.filter((function(t){return t.min_age_limit<=e})))||void 0===n?void 0:n.length)>0},v="ABOVE_AGE_18",g="ABOVE_AGE_45",x="AVAILABLITY",m=(a={},Object(O.a)(a,v,(function(t){return h(t,18)})),Object(O.a)(a,g,(function(t){return h(t,45)})),Object(O.a)(a,x,(function(t){return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return(null===t||void 0===t?void 0:t.available_capacity)>0})).length)>0})),Object(O.a)(a,"DATE",(function(t,e){var n=f(e.date,"dd-MM-yyyy");return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return t.date===n})).length)>0})),a),y=n(158),k=n(164),_=n(159),w=n(160),C=n(6),N=n(173),L=n(61),S=n(85),T=n.n(S),E=n(86),D=n.n(E),A=n(5),B=Object(C.a)({switchBase:{color:L.a[100],"&$checked":{color:L.a[600]},"&$checked + $track":{backgroundColor:L.a[600]}}})(N.a),I=Object(C.a)((function(t){return{root:{padding:"0 48px 0 48px",backgroundColor:t.palette.background.paper}}}))(y.a),M=Object(_.a)({title:{fontWeight:600},github:{marginLeft:"24px",padding:"2px"}}),F=function(t){var e=t.theme,n=t.setTheme,a=M();return Object(A.jsxs)(I,{container:!0,children:[Object(A.jsxs)(y.a,{container:!0,xs:8,justify:"flex-start",children:[Object(A.jsx)(T.a,{fontSize:"large"}),Object(A.jsx)(w.a,{variant:"h5",className:a.title,children:"Vaccine Finder"}),Object(A.jsx)("a",{className:a.github,href:"https://github.com/lokeshpathrabe/vaccine-finder",children:Object(A.jsx)(D.a,{})})]}),Object(A.jsx)(y.a,{container:!0,xs:4,justify:"flex-end",children:Object(A.jsx)(B,{name:"theme",onChange:function(t){n(t.target.checked?"dark":"light")},checked:"dark"===e,color:"#303030"})})]})},R=n(165),z=n(163),V=n(174),G=n(170),P=n(161),W=n(162),$=Object(_.a)((function(t){return console.log("theme",t),{center:{height:80,width:140,overflow:"auto"},centerName:{backgroundColor:t.palette.secondary.dark,lineHeight:"1.5em",borderRadius:"4px",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px"},badge:{padding:"8px"},slotContainer:{padding:"4px"}}})),J=function(t){var e=t.session;return Object(A.jsx)(P.a,{children:null===e||void 0===e?void 0:e.slots.map((function(t,e){return Object(A.jsx)(W.a,{button:!0,children:t},e)}))})},q=function(t){var e=t.center,n=t.age;return Object(A.jsx)(P.a,{children:null===e||void 0===e?void 0:e.sessions.filter((function(t){return t.min_age_limit===n})).map((function(t,n){return Boolean(t.available_capacity)?Object(A.jsxs)(W.a,{button:!0,children:["Session ".concat(n+1," - "),Object(A.jsx)(J,{session:t})]},"".concat(e.name,"-").concat(n)):Object(A.jsx)(w.a,{align:"center",children:"No sessions to show"})}))})},H=function(t){var e=t.center,n=t.onClick;return e.sessions.reduce((function(t,e){var n=t.findIndex((function(t){return t.min_age_limit===e.min_age_limit}));return-1===n?t.push({min_age_limit:e.min_age_limit,available_capacity:e.available_capacity}):t[n].available_capacity+=e.available_capacity,t}),[]).map((function(t){return Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(z.a,{badgeContent:t.available_capacity||"0",color:"primary",children:Object(A.jsx)(V.a,{label:"> ".concat(t.min_age_limit),color:"default",onClick:function(a){return n(a,e,t.min_age_limit)}})})})}))},Q=function(t){var e=t.center,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(),l=Object(i.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(),b=Object(i.a)(j,2),f=(b[0],b[1],Object(c.useState)()),p=Object(i.a)(f,2),O=p[0],h=p[1],v=$(),g=Object(c.useState)(1),x=Object(i.a)(g,2),m=x[0],_=x[1];return Object(A.jsxs)(k.a,{className:v.center,elevation:m,onMouseEnter:function(){return _(4)},onMouseLeave:function(){return _(1)},children:[Object(A.jsx)(R.a,{title:e.name,children:Object(A.jsx)("div",{className:v.centerName,children:e.name})}),Object(A.jsxs)(y.a,{container:!0,justify:"center",className:v.badge,spacing:2,children:[Object(A.jsx)(H,{center:e,onClick:function(t,e,n){d(e),h(n),Boolean(r)?o(null):o(t.currentTarget)}}),Object(A.jsx)(G.a,{id:"mouse-over-popover",open:Boolean(r),anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:function(){return o(null)},disableRestoreFocus:!0,children:Object(A.jsx)(y.a,{container:!0,justify:"center",className:v.slotContainer,children:Object(A.jsx)(q,{center:u,age:O})})})]})]})},Y=Object(_.a)((function(t){return{root:{flexGrow:1,padding:16},day:{height:80,width:140},noCenter:{padding:"20px"}}})),K=function(t){var e=t.data;return null===e||void 0===e?void 0:e.map((function(t,e){return Object(A.jsx)(y.a,{item:!0,spacing:2,children:Object(A.jsx)(Q,{center:t})},e)}))},U=function(t){var e=t.className;return Object(A.jsx)(w.a,{className:e,align:"center",children:"No Centers to show"})},X=function(t){var e=t.data,n=Y();return Object(A.jsx)(k.a,{className:n.root,elevation:2,children:Object(A.jsx)(y.a,{container:!0,spacing:6,justify:"center",children:(null===e||void 0===e?void 0:e.length)?Object(A.jsx)(K,{data:e}):Object(A.jsx)(U,{className:n.noCenter})})})},Z=n(31),tt=n(70),et=n(17),nt=n(91),at=n(168),it=function(){var t=Object(d.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/districts","/").concat(e),{headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/states"),{headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),rt=n(166),ot=n(171),st=Object(_.a)((function(t){return{filterContainer:{padding:"8px 0 8px 0"},filterRow:{padding:t.spacing(2)}}})),lt=function(t){var e=t.label,n=t.onClick,a=(t.classes,t.className,Object(nt.a)(t,["label","onClick","classes","className"])),r=Object(c.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(A.jsx)(rt.a,Object(et.a)(Object(et.a)({},a),{},{size:"small",style:{margin:"4px"},variant:"contained",color:s?"primary":"default",onClick:function(t){l(!s),n&&n(t)},children:e}))},ut=function(t){var e,n,a=t.filters,i=t.setFilters,c=st(),r=function(){var t=Object(j.a)("states",(function(){return ct()}),{staleTime:1/0}),e=t.data,n=t.isLoading,a=t.isError,i=t.status;return{data:(null===e||void 0===e?void 0:e.states)||[],isLoading:n,isError:a,status:i}}(),o=r.data,s=r.isLoading,l=function(t){console.log("useDistricts",t);var e=Object(j.a)("districts-".concat(t),(function(){return it(t)}),{staleTime:1/0,enabled:!!t}),n=e.data,a=e.isLoading,i=e.isError,c=e.status;return{data:(null===n||void 0===n?void 0:n.districts)||[],isLoading:a,isError:i,status:c}}(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.state_id),b=l.data,p=l.isLoading,O=function(t){var e,n=null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.indexOf(t),c=Object(tt.a)(a.categories);n>-1?(c.splice(n,1),i(Object(et.a)(Object(et.a)({},a),{},{categories:c}))):i(Object(et.a)(Object(et.a)({},a),{},{categories:[].concat(Object(tt.a)(c),[t])}))};return Object(A.jsxs)(y.a,{className:c.filterContainer,container:!0,xs:12,children:[Object(A.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-start",spacing:4,children:[Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(at.a,{id:"date",label:"Date",type:"date",value:a.date&&f(a.date,"yyyy-MM-dd"),InputLabelProps:{shrink:!0},onChange:function(t){console.log("date value",t),i(Object(et.a)(Object(et.a)({},a),{},{date:t.target.valueAsDate}))}})}),Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(ot.a,{id:"states",disabled:s,options:o,getOptionLabel:function(t){return t.state_name},getOptionSelected:function(t,e){return t.state_id===e.state_id},style:{width:300},renderInput:function(t){return Object(A.jsx)(at.a,Object(et.a)(Object(et.a)({},t),{},{label:"State",variant:"outlined"}))},onChange:function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(Object(et.a)(Object(et.a)({},a),{},{state:n}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}),Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(ot.a,{id:"district",disabled:p,options:b,getOptionLabel:function(t){return t.district_name},getOptionSelected:function(t,e){return t.district_id===e.district_id},style:{width:300},renderInput:function(t){return Object(A.jsx)(at.a,Object(et.a)(Object(et.a)({},t),{},{label:"District",variant:"outlined"}))},onChange:function(t,e){i(Object(et.a)(Object(et.a)({},a),{},{district:e}))}},(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.state_id)||0)})]}),Object(A.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-end",children:[Object(A.jsx)(lt,{label:"18+",onClick:function(){return O(v)}}),Object(A.jsx)(lt,{label:"45+",onClick:function(){return O(g)}}),Object(A.jsx)(lt,{label:"Available",onClick:function(){return O(x)}})]})]})},dt=Object(_.a)((function(t){return{app:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",padding:"24px",backgroundColor:t.palette.background.default},container:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",width:"90vw"}}})),jt={categories:["DATE"],state:{},district:{},date:new Date};var bt=function(){var t,e=Object(c.useState)(jt),n=Object(i.a)(e,2),a=n[0],r=n[1],o=Object(Z.a)(),s=function(t,e){var n=f(e,"dd-MM-yyyy"),a=Object(j.a)("slotsByDistrict-".concat(t,"-").concat(n),(function(){return p(t,n)}),{refetchInterval:6e4,enabled:!!t&&!!e}),i=a.data,c=a.isLoading,r=a.isError,o=a.status;return{data:null===i||void 0===i?void 0:i.centers,isLoading:c,isError:r,status:o}}(null===a||void 0===a||null===(t=a.district)||void 0===t?void 0:t.district_id,a.date),l=s.data,u=s.isLoading,d=function(t,e){return function(t,e,n){if((null===t||void 0===t?void 0:t.length)>0)return t.filter((function(t){return-1===n.map((function(n){return n(t,e)})).indexOf(!1)}))}(t,e,e.categories.map((function(t){return m[t]})))}(l,a),b=dt();return document.querySelector("html").style.backgroundColor=o.palette.background.default,Object(A.jsx)("div",{className:b.app,children:Object(A.jsxs)("div",{className:b.container,children:[Object(A.jsx)(ut,{filters:a,setFilters:r}),u?Object(A.jsx)("div",{children:"loading ...."}):Object(A.jsx)(X,{data:d})]})})},ft=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,175)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))},pt=n(88),Ot=n(169),ht=n(79),vt=n(167),gt=n(90),xt={light:{palette:{type:"light",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#84c887",main:"#6fbf73",dark:"#4caf50",contrastText:"#000"},background:{paper:"#fff",default:"#fafafa"},header:{main:"#03a9f4"}}},dark:{palette:{type:"dark",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#6fbf73",main:"#4caf50",dark:"#357a38",contrastText:"#000"},background:{paper:"#424242",default:"#303030"},header:{main:"#03a9f4"}}}},mt=new Ot.a,yt=function(){var t=Object(c.useState)("light"),e=Object(i.a)(t,2),n=e[0],a=e[1];return console.log("updated theme",n),Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsxs)(ht.a,{client:mt,children:[Object(A.jsxs)(vt.a,{theme:Object(gt.a)(xt[n]),children:[Object(A.jsx)(F,{theme:n,setTheme:a}),Object(A.jsx)(bt,{})]}),Object(A.jsx)(pt.ReactQueryDevtools,{})]})})};s.a.render(Object(A.jsx)(yt,{}),document.getElementById("root")),ft()}},[[118,1,2]]]);
//# sourceMappingURL=main.df367102.chunk.js.map