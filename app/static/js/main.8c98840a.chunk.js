(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],{110:function(t,e,n){},120:function(t,e,n){"use strict";n.r(e);var a,i=n(23),c=n(0),r=n.n(c),o=n(14),s=n.n(o),l=(n(110),n(22)),u=n.n(l),d=n(29),j=n(174),b=n(91),f=function(t,e){return Object(b.a)(t,e)},p=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict","?district_id=").concat(e,"&date=").concat(n),{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),O=n(36),h=function(t,e){var n;return(null===t||void 0===t||null===(n=t.sessions.filter((function(t){return t.min_age_limit<=e})))||void 0===n?void 0:n.length)>0},v="ABOVE_AGE_18",x="ABOVE_AGE_45",g="AVAILABLITY",m=(a={},Object(O.a)(a,v,(function(t){return h(t,18)})),Object(O.a)(a,x,(function(t){return h(t,45)})),Object(O.a)(a,g,(function(t){return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return(null===t||void 0===t?void 0:t.available_capacity)>0})).length)>0})),Object(O.a)(a,"DATE",(function(t,e){var n=f(e.date,"dd-MM-yyyy");return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return t.date===n})).length)>0})),a),y=n(160),k=n(166),_=n(161),w=n(162),C=n(6),N=n(175),S=n(64),L=n(85),T=n.n(L),E=n(86),D=n.n(E),A=n(87),B=n.n(A),I=n(88),M=n.n(I),F=n(5),R=Object(C.a)({switchBase:{color:S.a[100],"&$checked":{color:S.a[600]},"&$checked + $track":{backgroundColor:S.a[600]}}})(N.a),z=Object(C.a)((function(t){return{root:{padding:"0 48px 0 48px",backgroundColor:t.palette.background.paper}}}))(y.a),V=Object(_.a)((function(t){return{title:{fontWeight:600,color:t.palette.text.primary},titleIcon:{color:t.palette.text.primary},github:{marginLeft:"24px",padding:"2px",color:t.palette.text.primary}}})),G=function(t){var e=t.theme,n=t.setTheme,a=V();return Object(F.jsxs)(z,{container:!0,children:[Object(F.jsxs)(y.a,{container:!0,xs:8,justify:"flex-start",children:[Object(F.jsx)(T.a,{className:a.titleIcon,fontSize:"large"}),Object(F.jsx)(w.a,{variant:"h5",className:a.title,children:"Vaccine Finder"}),Object(F.jsx)("a",{href:"https://github.com/lokeshpathrabe/vaccine-finder",children:Object(F.jsx)(D.a,{className:a.github})})]}),Object(F.jsxs)(y.a,{container:!0,xs:4,justify:"flex-end",children:[Object(F.jsx)(R,{name:"theme",onChange:function(t){n(t.target.checked?"dark":"light")},checked:"dark"===e,color:"#303030"}),"dark"===e?Object(F.jsx)(B.a,{style:{color:S.a[500],alignSelf:"center"}}):Object(F.jsx)(M.a,{style:{color:S.a[0],alignSelf:"center"}})]})]})},P=n(167),W=n(165),$=n(176),J=n(172),q=n(163),H=n(164),Q=Object(_.a)((function(t){return console.log("theme",t),{center:{height:80,width:140,overflow:"auto"},centerName:{backgroundColor:t.palette.secondary.dark,lineHeight:"1.5em",borderRadius:"4px",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px"},badge:{padding:"8px"},slotContainer:{padding:"4px"}}})),Y=function(t){var e=t.session;return Object(F.jsx)(q.a,{children:null===e||void 0===e?void 0:e.slots.map((function(t,e){return Object(F.jsx)(H.a,{button:!0,children:t},e)}))})},K=function(t){var e=t.center,n=t.age;return Object(F.jsx)(q.a,{children:null===e||void 0===e?void 0:e.sessions.filter((function(t){return t.min_age_limit===n})).map((function(t,n){return Boolean(t.available_capacity)?Object(F.jsxs)(H.a,{button:!0,children:["Session ".concat(n+1," - "),Object(F.jsx)(Y,{session:t})]},"".concat(e.name,"-").concat(n)):Object(F.jsx)(w.a,{align:"center",children:"No sessions to show"})}))})},U=function(t){var e=t.center,n=t.onClick;return e.sessions.reduce((function(t,e){var n=t.findIndex((function(t){return t.min_age_limit===e.min_age_limit}));return-1===n?t.push({min_age_limit:e.min_age_limit,available_capacity:e.available_capacity}):t[n].available_capacity+=e.available_capacity,t}),[]).map((function(t){return Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(W.a,{badgeContent:t.available_capacity||"0",color:"primary",children:Object(F.jsx)($.a,{label:"> ".concat(t.min_age_limit),color:"default",onClick:function(a){return n(a,e,t.min_age_limit)}})})})}))},X=function(t){var e=t.center,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(),l=Object(i.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(),b=Object(i.a)(j,2),f=(b[0],b[1],Object(c.useState)()),p=Object(i.a)(f,2),O=p[0],h=p[1],v=Q(),x=Object(c.useState)(1),g=Object(i.a)(x,2),m=g[0],_=g[1];return Object(F.jsxs)(k.a,{className:v.center,elevation:m,onMouseEnter:function(){return _(4)},onMouseLeave:function(){return _(1)},children:[Object(F.jsx)(P.a,{title:e.name,children:Object(F.jsx)("div",{className:v.centerName,children:e.name})}),Object(F.jsxs)(y.a,{container:!0,justify:"center",className:v.badge,spacing:2,children:[Object(F.jsx)(U,{center:e,onClick:function(t,e,n){d(e),h(n),Boolean(r)?o(null):o(t.currentTarget)}}),Object(F.jsx)(J.a,{id:"mouse-over-popover",open:Boolean(r),anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:function(){return o(null)},disableRestoreFocus:!0,children:Object(F.jsx)(y.a,{container:!0,justify:"center",className:v.slotContainer,children:Object(F.jsx)(K,{center:u,age:O})})})]})]})},Z=Object(_.a)((function(t){return{root:{flexGrow:1,padding:16},day:{height:80,width:140},noCenter:{padding:"20px"}}})),tt=function(t){var e=t.data;return null===e||void 0===e?void 0:e.map((function(t,e){return Object(F.jsx)(y.a,{item:!0,spacing:2,children:Object(F.jsx)(X,{center:t})},e)}))},et=function(t){var e=t.className;return Object(F.jsx)(w.a,{className:e,align:"center",children:"No Centers to show"})},nt=function(t){var e=t.data,n=Z();return Object(F.jsx)(k.a,{className:n.root,elevation:2,children:Object(F.jsx)(y.a,{container:!0,spacing:6,justify:"center",children:(null===e||void 0===e?void 0:e.length)?Object(F.jsx)(tt,{data:e}):Object(F.jsx)(et,{className:n.noCenter})})})},at=n(31),it=n(73),ct=n(17),rt=n(93),ot=n(170),st=function(){var t=Object(d.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/districts","/").concat(e),{headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/states"),{headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ut=n(168),dt=n(173),jt=Object(_.a)((function(t){return{filterContainer:{padding:"8px 0 8px 0"},filterRow:{padding:t.spacing(2)}}})),bt=function(t){var e=t.label,n=t.onClick,a=(t.classes,t.className,Object(rt.a)(t,["label","onClick","classes","className"])),r=Object(c.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(F.jsx)(ut.a,Object(ct.a)(Object(ct.a)({},a),{},{size:"small",style:{margin:"4px"},variant:"contained",color:s?"primary":"default",onClick:function(t){l(!s),n&&n(t)},children:e}))},ft=function(t){var e,n,a=t.filters,i=t.setFilters,c=jt(),r=function(){var t=Object(j.a)("states",(function(){return lt()}),{staleTime:1/0}),e=t.data,n=t.isLoading,a=t.isError,i=t.status;return{data:(null===e||void 0===e?void 0:e.states)||[],isLoading:n,isError:a,status:i}}(),o=r.data,s=r.isLoading,l=function(t){console.log("useDistricts",t);var e=Object(j.a)("districts-".concat(t),(function(){return st(t)}),{staleTime:1/0,enabled:!!t}),n=e.data,a=e.isLoading,i=e.isError,c=e.status;return{data:(null===n||void 0===n?void 0:n.districts)||[],isLoading:a,isError:i,status:c}}(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.state_id),b=l.data,p=l.isLoading,O=function(t){var e,n=null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.indexOf(t),c=Object(it.a)(a.categories);n>-1?(c.splice(n,1),i(Object(ct.a)(Object(ct.a)({},a),{},{categories:c}))):i(Object(ct.a)(Object(ct.a)({},a),{},{categories:[].concat(Object(it.a)(c),[t])}))};return Object(F.jsxs)(y.a,{className:c.filterContainer,container:!0,xs:12,children:[Object(F.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-start",spacing:4,children:[Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(ot.a,{id:"date",label:"Date",type:"date",value:a.date&&f(a.date,"yyyy-MM-dd"),InputLabelProps:{shrink:!0},onChange:function(t){console.log("date value",t),i(Object(ct.a)(Object(ct.a)({},a),{},{date:t.target.valueAsDate}))}})}),Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(dt.a,{id:"states",disabled:s,options:o,getOptionLabel:function(t){return t.state_name},getOptionSelected:function(t,e){return t.state_id===e.state_id},style:{width:300},renderInput:function(t){return Object(F.jsx)(ot.a,Object(ct.a)(Object(ct.a)({},t),{},{label:"State",variant:"outlined"}))},onChange:function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(Object(ct.a)(Object(ct.a)({},a),{},{state:n}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}),Object(F.jsx)(y.a,{item:!0,children:Object(F.jsx)(dt.a,{id:"district",disabled:p,options:b,getOptionLabel:function(t){return t.district_name},getOptionSelected:function(t,e){return t.district_id===e.district_id},style:{width:300},renderInput:function(t){return Object(F.jsx)(ot.a,Object(ct.a)(Object(ct.a)({},t),{},{label:"District",variant:"outlined"}))},onChange:function(t,e){i(Object(ct.a)(Object(ct.a)({},a),{},{district:e}))}},(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.state_id)||0)})]}),Object(F.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-end",children:[Object(F.jsx)(bt,{label:"18+",onClick:function(){return O(v)}}),Object(F.jsx)(bt,{label:"45+",onClick:function(){return O(x)}}),Object(F.jsx)(bt,{label:"Available",onClick:function(){return O(g)}})]})]})},pt=Object(_.a)((function(t){return{app:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",padding:"24px",backgroundColor:t.palette.background.default},container:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",width:"90vw"}}})),Ot={categories:["DATE"],state:{},district:{},date:new Date};var ht=function(){var t,e=Object(c.useState)(Ot),n=Object(i.a)(e,2),a=n[0],r=n[1],o=Object(at.a)(),s=function(t,e){var n=f(e,"dd-MM-yyyy"),a=Object(j.a)("slotsByDistrict-".concat(t,"-").concat(n),(function(){return p(t,n)}),{refetchInterval:6e4,enabled:!!t&&!!e}),i=a.data,c=a.isLoading,r=a.isError,o=a.status;return{data:null===i||void 0===i?void 0:i.centers,isLoading:c,isError:r,status:o}}(null===a||void 0===a||null===(t=a.district)||void 0===t?void 0:t.district_id,a.date),l=s.data,u=s.isLoading,d=function(t,e){return function(t,e,n){if((null===t||void 0===t?void 0:t.length)>0)return t.filter((function(t){return-1===n.map((function(n){return n(t,e)})).indexOf(!1)}))}(t,e,e.categories.map((function(t){return m[t]})))}(l,a),b=pt();return document.querySelector("html").style.backgroundColor=o.palette.background.default,Object(F.jsx)("div",{className:b.app,children:Object(F.jsxs)("div",{className:b.container,children:[Object(F.jsx)(ft,{filters:a,setFilters:r}),u?Object(F.jsx)("div",{children:"loading ...."}):Object(F.jsx)(nt,{data:d})]})})},vt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,177)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))},xt=n(90),gt=n(171),mt=n(79),yt=n(169),kt=n(92),_t={light:{palette:{type:"light",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#84c887",main:"#6fbf73",dark:"#4caf50",contrastText:"#000"},background:{paper:"#fff",default:"#fafafa"},header:{main:"#03a9f4"}}},dark:{palette:{type:"dark",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#6fbf73",main:"#4caf50",dark:"#357a38",contrastText:"#000"},background:{paper:"#424242",default:"#303030"},header:{main:"#03a9f4"}}}},wt=new gt.a,Ct=function(){var t=Object(c.useState)("light"),e=Object(i.a)(t,2),n=e[0],a=e[1];return console.log("updated theme",n),Object(F.jsx)(r.a.StrictMode,{children:Object(F.jsxs)(mt.a,{client:wt,children:[Object(F.jsxs)(yt.a,{theme:Object(kt.a)(_t[n]),children:[Object(F.jsx)(G,{theme:n,setTheme:a}),Object(F.jsx)(ht,{})]}),Object(F.jsx)(xt.ReactQueryDevtools,{})]})})};s.a.render(Object(F.jsx)(Ct,{}),document.getElementById("root")),vt()}},[[120,1,2]]]);
//# sourceMappingURL=main.8c98840a.chunk.js.map