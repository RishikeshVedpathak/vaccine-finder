(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],{105:function(t,e,n){"use strict";n.r(e);var a,i=n(0),c=n.n(i),r=n(14),o=n.n(r),s=(n(96),n(24)),l=n(20),u=n.n(l),d=n(26),j=n(159),b=n(76),f=function(t,e){return Object(b.a)(t,e)},p=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict","?district_id=").concat(e,"&date=").concat(n),{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),O=n(32),v=function(t,e){var n;return(null===t||void 0===t||null===(n=t.sessions.filter((function(t){return t.min_age_limit<=e})))||void 0===n?void 0:n.length)>0},h="ABOVE_AGE_18",x="ABOVE_AGE_45",g="AVAILABLITY",m=(a={},Object(O.a)(a,h,(function(t){return v(t,18)})),Object(O.a)(a,x,(function(t){return v(t,45)})),Object(O.a)(a,g,(function(t){return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return(null===t||void 0===t?void 0:t.available_capacity)>0})).length)>0})),Object(O.a)(a,"DATE",(function(t,e){var n=f(e.date,"dd-MM-yyyy");return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return t.date===n})).length)>0})),a),y=n(149),_=n(151),w=n(143),C=n(148),k=n(152),L=n(150),N=n(160),E=n(157),S=n(145),D=n(147),T=n(5),A=Object(w.a)((function(t){return console.log("theme",t),{center:{height:80,width:140,overflow:"auto"},centerName:{backgroundColor:t.palette.secondary.light,lineHeight:"1.5em",borderRadius:"4px",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px"},badge:{padding:"8px"},slotContainer:{padding:"4px"}}})),B=function(t){var e=t.session;return Object(T.jsx)(S.a,{children:null===e||void 0===e?void 0:e.slots.map((function(t,e){return Object(T.jsx)(D.a,{button:!0,children:t},e)}))})},I=function(t){var e=t.center,n=t.age;return Object(T.jsx)(S.a,{children:null===e||void 0===e?void 0:e.sessions.filter((function(t){return t.min_age_limit===n})).map((function(t,n){return Boolean(t.available_capacity)?Object(T.jsxs)(D.a,{button:!0,children:["Session ".concat(n+1," - "),Object(T.jsx)(B,{session:t})]},"".concat(e.name,"-").concat(n)):Object(T.jsx)(C.a,{align:"center",children:"No sessions to show"})}))})},M=function(t){var e=t.center,n=t.onClick;return e.sessions.reduce((function(t,e){var n=t.findIndex((function(t){return t.min_age_limit===e.min_age_limit}));return-1===n?t.push({min_age_limit:e.min_age_limit,available_capacity:e.available_capacity}):t[n].available_capacity+=e.available_capacity,t}),[]).map((function(t){return Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(L.a,{badgeContent:t.available_capacity||"0",color:"primary",children:Object(T.jsx)(N.a,{label:"> ".concat(t.min_age_limit),color:"default",onClick:function(a){return n(a,e,t.min_age_limit)}})})})}))},F=function(t){var e=t.center,n=Object(i.useState)(!1),a=Object(s.a)(n,2),c=a[0],r=a[1],o=Object(i.useState)(),l=Object(s.a)(o,2),u=l[0],d=l[1],j=Object(i.useState)(),b=Object(s.a)(j,2),f=(b[0],b[1],Object(i.useState)()),p=Object(s.a)(f,2),O=p[0],v=p[1],h=A(),x=Object(i.useState)(1),g=Object(s.a)(x,2),m=g[0],w=g[1];return Object(T.jsxs)(_.a,{className:h.center,elevation:m,onMouseEnter:function(){return w(4)},onMouseLeave:function(){return w(1)},children:[Object(T.jsx)(k.a,{title:e.name,children:Object(T.jsx)("div",{className:h.centerName,children:e.name})}),Object(T.jsxs)(y.a,{container:!0,justify:"center",className:h.badge,spacing:2,children:[Object(T.jsx)(M,{center:e,onClick:function(t,e,n){d(e),v(n),Boolean(c)?r(null):r(t.currentTarget)}}),Object(T.jsx)(E.a,{id:"mouse-over-popover",open:Boolean(c),anchorEl:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:function(){return r(null)},disableRestoreFocus:!0,children:Object(T.jsx)(y.a,{container:!0,justify:"center",className:h.slotContainer,children:Object(T.jsx)(I,{center:u,age:O})})})]})]})},R=Object(w.a)((function(t){return{root:{flexGrow:1,padding:16},day:{height:80,width:140}}})),z=function(t){var e=t.data;return null===e||void 0===e?void 0:e.map((function(t,e){return Object(T.jsx)(y.a,{item:!0,spacing:2,children:Object(T.jsx)(F,{center:t})},e)}))},G=function(){return Object(T.jsx)(C.a,{align:"center",children:"No Centers to show"})},P=function(t){var e=t.data,n=R();return Object(T.jsx)(_.a,{className:n.root,elevation:2,children:Object(T.jsx)(y.a,{container:!0,spacing:6,justify:"center",children:(null===e||void 0===e?void 0:e.length)?Object(T.jsx)(z,{data:e}):Object(T.jsx)(G,{})})})},V=n(61),J=n(16),W=n(78),H=n(155),Q=function(){var t=Object(d.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/districts","/").concat(e),{headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Y=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/states"),{headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=n(153),K=n(158),U=Object(w.a)((function(t){return{filterContainer:{padding:"8px 0 8px 0"},filterRow:{padding:t.spacing(2)}}})),X=function(t){var e=t.label,n=t.onClick,a=(t.classes,t.className,Object(W.a)(t,["label","onClick","classes","className"])),c=Object(i.useState)(!1),r=Object(s.a)(c,2),o=r[0],l=r[1];return Object(T.jsx)(q.a,Object(J.a)(Object(J.a)({},a),{},{size:"small",style:{margin:"4px"},variant:"contained",color:o?"primary":"default",onClick:function(t){l(!o),n&&n(t)},children:e}))},Z=function(t){var e,n,a=t.filters,i=t.setFilters,c=U(),r=function(){var t=Object(j.a)("states",(function(){return Y()}),{staleTime:1/0}),e=t.data,n=t.isLoading,a=t.isError,i=t.status;return{data:(null===e||void 0===e?void 0:e.states)||[],isLoading:n,isError:a,status:i}}(),o=r.data,s=r.isLoading,l=function(t){console.log("useDistricts",t);var e=Object(j.a)("districts-".concat(t),(function(){return Q(t)}),{staleTime:1/0,enabled:!!t}),n=e.data,a=e.isLoading,i=e.isError,c=e.status;return{data:(null===n||void 0===n?void 0:n.districts)||[],isLoading:a,isError:i,status:c}}(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.state_id),b=l.data,p=l.isLoading,O=function(t){var e,n=null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.indexOf(t),c=Object(V.a)(a.categories);n>-1?(c.splice(n,1),i(Object(J.a)(Object(J.a)({},a),{},{categories:c}))):i(Object(J.a)(Object(J.a)({},a),{},{categories:[].concat(Object(V.a)(c),[t])}))};return Object(T.jsxs)(y.a,{className:c.filterContainer,container:!0,xs:12,children:[Object(T.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-start",spacing:4,children:[Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(H.a,{id:"date",label:"Date",type:"date",value:a.date&&f(a.date,"yyyy-MM-dd"),InputLabelProps:{shrink:!0},onChange:function(t){console.log("date value",t),i(Object(J.a)(Object(J.a)({},a),{},{date:t.target.valueAsDate}))}})}),Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(K.a,{id:"states",disabled:s,options:o,getOptionLabel:function(t){return t.state_name},getOptionSelected:function(t,e){return t.state_id===e.state_id},style:{width:300},renderInput:function(t){return Object(T.jsx)(H.a,Object(J.a)(Object(J.a)({},t),{},{label:"State",variant:"outlined"}))},onChange:function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(Object(J.a)(Object(J.a)({},a),{},{state:n}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}),Object(T.jsx)(y.a,{item:!0,children:Object(T.jsx)(K.a,{id:"district",disabled:p,options:b,getOptionLabel:function(t){return t.district_name},getOptionSelected:function(t,e){return t.district_id===e.district_id},style:{width:300},renderInput:function(t){return Object(T.jsx)(H.a,Object(J.a)(Object(J.a)({},t),{},{label:"District",variant:"outlined"}))},onChange:function(t,e){i(Object(J.a)(Object(J.a)({},a),{},{district:e}))}},(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.state_id)||0)})]}),Object(T.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-end",children:[Object(T.jsx)(X,{label:"18+",onClick:function(){return O(h)}}),Object(T.jsx)(X,{label:"45+",onClick:function(){return O(x)}}),Object(T.jsx)(X,{label:"Available",onClick:function(){return O(g)}})]})]})},$=n(77),tt=n(154),et=Object($.a)({palette:{type:"light",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#a2cf6e",main:"#8bc34a",dark:"#618833",contrastText:"#000"}}}),nt=Object(w.a)((function(t){return{app:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",padding:"24px"},container:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",width:"90vw"}}})),at={categories:["DATE"],state:{},district:{},date:new Date};var it=function(){var t,e=Object(i.useState)(at),n=Object(s.a)(e,2),a=n[0],c=n[1],r=function(t,e){var n=f(e,"dd-MM-yyyy"),a=Object(j.a)("slotsByDistrict-".concat(t,"-").concat(n),(function(){return p(t,n)}),{refetchInterval:6e4,enabled:!!t&&!!e}),i=a.data,c=a.isLoading,r=a.isError,o=a.status;return{data:null===i||void 0===i?void 0:i.centers,isLoading:c,isError:r,status:o}}(null===a||void 0===a||null===(t=a.district)||void 0===t?void 0:t.district_id,a.date),o=r.data,l=r.isLoading,u=function(t,e){return function(t,e,n){if((null===t||void 0===t?void 0:t.length)>0)return t.filter((function(t){return-1===n.map((function(n){return n(t,e)})).indexOf(!1)}))}(t,e,e.categories.map((function(t){return m[t]})))}(o,a),d=nt();return Object(T.jsx)(tt.a,{theme:et,children:Object(T.jsx)("div",{className:d.app,children:Object(T.jsxs)("div",{className:d.container,children:[Object(T.jsx)(Z,{filters:a,setFilters:c}),l?Object(T.jsx)("div",{children:"loading ...."}):Object(T.jsx)(P,{data:u})]})})})},ct=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))},rt=n(75),ot=n(156),st=n(67),lt=new ot.a;o.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsxs)(st.a,{client:lt,children:[Object(T.jsx)(it,{}),Object(T.jsx)(rt.ReactQueryDevtools,{})]})}),document.getElementById("root")),ct()},96:function(t,e,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.457a7bf3.chunk.js.map