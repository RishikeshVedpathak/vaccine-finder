(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],{104:function(t,e,n){},117:function(t,e,n){"use strict";n.r(e);var a,i=n(23),c=n(0),r=n.n(c),o=n(14),s=n.n(o),l=(n(104),n(22)),u=n.n(l),d=n(29),j=n(171),b=n(85),f=function(t,e){return Object(b.a)(t,e)},p=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict","?district_id=").concat(e,"&date=").concat(n),{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),O=n(36),h=function(t,e){var n;return(null===t||void 0===t||null===(n=t.sessions.filter((function(t){return t.min_age_limit<=e})))||void 0===n?void 0:n.length)>0},v="ABOVE_AGE_18",x="ABOVE_AGE_45",g="AVAILABLITY",m=(a={},Object(O.a)(a,v,(function(t){return h(t,18)})),Object(O.a)(a,x,(function(t){return h(t,45)})),Object(O.a)(a,g,(function(t){return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return(null===t||void 0===t?void 0:t.available_capacity)>0})).length)>0})),Object(O.a)(a,"DATE",(function(t,e){var n=f(e.date,"dd-MM-yyyy");return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return t.date===n})).length)>0})),a),y=n(157),k=n(163),_=n(158),w=n(159),C=n(6),N=n(172),L=n(61),S=n(82),T=n.n(S),E=n(5),D=Object(C.a)({switchBase:{color:L.a[100],"&$checked":{color:L.a[600]},"&$checked + $track":{backgroundColor:L.a[600]}}})(N.a),A=Object(C.a)((function(t){return{root:{padding:"0 48px 0 48px",backgroundColor:t.palette.background.paper}}}))(y.a),B=Object(_.a)({title:{fontWeight:600}}),I=function(t){var e=t.theme,n=t.setTheme,a=B();return Object(E.jsxs)(A,{container:!0,children:[Object(E.jsxs)(y.a,{container:!0,xs:8,justify:"flex-start",children:[Object(E.jsx)(T.a,{fontSize:"large"}),Object(E.jsx)(w.a,{variant:"h5",className:a.title,children:"Vaccine Finder"})]}),Object(E.jsx)(y.a,{container:!0,xs:4,justify:"flex-end",children:Object(E.jsx)(D,{name:"theme",onChange:function(t){n(t.target.checked?"dark":"light")},checked:"dark"===e,color:"#303030"})})]})},M=n(164),F=n(162),R=n(173),z=n(169),V=n(160),G=n(161),P=Object(_.a)((function(t){return console.log("theme",t),{center:{height:80,width:140,overflow:"auto"},centerName:{backgroundColor:t.palette.secondary.dark,lineHeight:"1.5em",borderRadius:"4px",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px"},badge:{padding:"8px"},slotContainer:{padding:"4px"}}})),W=function(t){var e=t.session;return Object(E.jsx)(V.a,{children:null===e||void 0===e?void 0:e.slots.map((function(t,e){return Object(E.jsx)(G.a,{button:!0,children:t},e)}))})},$=function(t){var e=t.center,n=t.age;return Object(E.jsx)(V.a,{children:null===e||void 0===e?void 0:e.sessions.filter((function(t){return t.min_age_limit===n})).map((function(t,n){return Boolean(t.available_capacity)?Object(E.jsxs)(G.a,{button:!0,children:["Session ".concat(n+1," - "),Object(E.jsx)(W,{session:t})]},"".concat(e.name,"-").concat(n)):Object(E.jsx)(w.a,{align:"center",children:"No sessions to show"})}))})},J=function(t){var e=t.center,n=t.onClick;return e.sessions.reduce((function(t,e){var n=t.findIndex((function(t){return t.min_age_limit===e.min_age_limit}));return-1===n?t.push({min_age_limit:e.min_age_limit,available_capacity:e.available_capacity}):t[n].available_capacity+=e.available_capacity,t}),[]).map((function(t){return Object(E.jsx)(y.a,{item:!0,children:Object(E.jsx)(F.a,{badgeContent:t.available_capacity||"0",color:"primary",children:Object(E.jsx)(R.a,{label:"> ".concat(t.min_age_limit),color:"default",onClick:function(a){return n(a,e,t.min_age_limit)}})})})}))},q=function(t){var e=t.center,n=Object(c.useState)(!1),a=Object(i.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(),l=Object(i.a)(s,2),u=l[0],d=l[1],j=Object(c.useState)(),b=Object(i.a)(j,2),f=(b[0],b[1],Object(c.useState)()),p=Object(i.a)(f,2),O=p[0],h=p[1],v=P(),x=Object(c.useState)(1),g=Object(i.a)(x,2),m=g[0],_=g[1];return Object(E.jsxs)(k.a,{className:v.center,elevation:m,onMouseEnter:function(){return _(4)},onMouseLeave:function(){return _(1)},children:[Object(E.jsx)(M.a,{title:e.name,children:Object(E.jsx)("div",{className:v.centerName,children:e.name})}),Object(E.jsxs)(y.a,{container:!0,justify:"center",className:v.badge,spacing:2,children:[Object(E.jsx)(J,{center:e,onClick:function(t,e,n){d(e),h(n),Boolean(r)?o(null):o(t.currentTarget)}}),Object(E.jsx)(z.a,{id:"mouse-over-popover",open:Boolean(r),anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:function(){return o(null)},disableRestoreFocus:!0,children:Object(E.jsx)(y.a,{container:!0,justify:"center",className:v.slotContainer,children:Object(E.jsx)($,{center:u,age:O})})})]})]})},H=Object(_.a)((function(t){return{root:{flexGrow:1,padding:16},day:{height:80,width:140},noCenter:{padding:"20px"}}})),Q=function(t){var e=t.data;return null===e||void 0===e?void 0:e.map((function(t,e){return Object(E.jsx)(y.a,{item:!0,spacing:2,children:Object(E.jsx)(q,{center:t})},e)}))},Y=function(t){var e=t.className;return Object(E.jsx)(w.a,{className:e,align:"center",children:"No Centers to show"})},K=function(t){var e=t.data,n=H();return Object(E.jsx)(k.a,{className:n.root,elevation:2,children:Object(E.jsx)(y.a,{container:!0,spacing:6,justify:"center",children:(null===e||void 0===e?void 0:e.length)?Object(E.jsx)(Q,{data:e}):Object(E.jsx)(Y,{className:n.noCenter})})})},U=n(31),X=n(70),Z=n(17),tt=n(87),et=n(167),nt=function(){var t=Object(d.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/districts","/").concat(e),{headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),at=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/states"),{headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),it=n(165),ct=n(170),rt=Object(_.a)((function(t){return{filterContainer:{padding:"8px 0 8px 0"},filterRow:{padding:t.spacing(2)}}})),ot=function(t){var e=t.label,n=t.onClick,a=(t.classes,t.className,Object(tt.a)(t,["label","onClick","classes","className"])),r=Object(c.useState)(!1),o=Object(i.a)(r,2),s=o[0],l=o[1];return Object(E.jsx)(it.a,Object(Z.a)(Object(Z.a)({},a),{},{size:"small",style:{margin:"4px"},variant:"contained",color:s?"primary":"default",onClick:function(t){l(!s),n&&n(t)},children:e}))},st=function(t){var e,n,a=t.filters,i=t.setFilters,c=rt(),r=function(){var t=Object(j.a)("states",(function(){return at()}),{staleTime:1/0}),e=t.data,n=t.isLoading,a=t.isError,i=t.status;return{data:(null===e||void 0===e?void 0:e.states)||[],isLoading:n,isError:a,status:i}}(),o=r.data,s=r.isLoading,l=function(t){console.log("useDistricts",t);var e=Object(j.a)("districts-".concat(t),(function(){return nt(t)}),{staleTime:1/0,enabled:!!t}),n=e.data,a=e.isLoading,i=e.isError,c=e.status;return{data:(null===n||void 0===n?void 0:n.districts)||[],isLoading:a,isError:i,status:c}}(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.state_id),b=l.data,p=l.isLoading,O=function(t){var e,n=null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.indexOf(t),c=Object(X.a)(a.categories);n>-1?(c.splice(n,1),i(Object(Z.a)(Object(Z.a)({},a),{},{categories:c}))):i(Object(Z.a)(Object(Z.a)({},a),{},{categories:[].concat(Object(X.a)(c),[t])}))};return Object(E.jsxs)(y.a,{className:c.filterContainer,container:!0,xs:12,children:[Object(E.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-start",spacing:4,children:[Object(E.jsx)(y.a,{item:!0,children:Object(E.jsx)(et.a,{id:"date",label:"Date",type:"date",value:a.date&&f(a.date,"yyyy-MM-dd"),InputLabelProps:{shrink:!0},onChange:function(t){console.log("date value",t),i(Object(Z.a)(Object(Z.a)({},a),{},{date:t.target.valueAsDate}))}})}),Object(E.jsx)(y.a,{item:!0,children:Object(E.jsx)(ct.a,{id:"states",disabled:s,options:o,getOptionLabel:function(t){return t.state_name},getOptionSelected:function(t,e){return t.state_id===e.state_id},style:{width:300},renderInput:function(t){return Object(E.jsx)(et.a,Object(Z.a)(Object(Z.a)({},t),{},{label:"State",variant:"outlined"}))},onChange:function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(Object(Z.a)(Object(Z.a)({},a),{},{state:n}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}),Object(E.jsx)(y.a,{item:!0,children:Object(E.jsx)(ct.a,{id:"district",disabled:p,options:b,getOptionLabel:function(t){return t.district_name},getOptionSelected:function(t,e){return t.district_id===e.district_id},style:{width:300},renderInput:function(t){return Object(E.jsx)(et.a,Object(Z.a)(Object(Z.a)({},t),{},{label:"District",variant:"outlined"}))},onChange:function(t,e){i(Object(Z.a)(Object(Z.a)({},a),{},{district:e}))}},(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.state_id)||0)})]}),Object(E.jsxs)(y.a,{className:c.filterRow,container:!0,xs:12,justify:"flex-end",children:[Object(E.jsx)(ot,{label:"18+",onClick:function(){return O(v)}}),Object(E.jsx)(ot,{label:"45+",onClick:function(){return O(x)}}),Object(E.jsx)(ot,{label:"Available",onClick:function(){return O(g)}})]})]})},lt=Object(_.a)((function(t){return{app:{height:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",padding:"24px",backgroundColor:t.palette.background.default},container:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",width:"90vw"}}})),ut={categories:["DATE"],state:{},district:{},date:new Date};var dt=function(){var t,e=Object(c.useState)(ut),n=Object(i.a)(e,2),a=n[0],r=n[1],o=Object(U.a)(),s=function(t,e){var n=f(e,"dd-MM-yyyy"),a=Object(j.a)("slotsByDistrict-".concat(t,"-").concat(n),(function(){return p(t,n)}),{refetchInterval:6e4,enabled:!!t&&!!e}),i=a.data,c=a.isLoading,r=a.isError,o=a.status;return{data:null===i||void 0===i?void 0:i.centers,isLoading:c,isError:r,status:o}}(null===a||void 0===a||null===(t=a.district)||void 0===t?void 0:t.district_id,a.date),l=s.data,u=s.isLoading,d=function(t,e){return function(t,e,n){if((null===t||void 0===t?void 0:t.length)>0)return t.filter((function(t){return-1===n.map((function(n){return n(t,e)})).indexOf(!1)}))}(t,e,e.categories.map((function(t){return m[t]})))}(l,a),b=lt();return document.querySelector("html").style.backgroundColor=o.palette.background.default,Object(E.jsx)("div",{className:b.app,children:Object(E.jsxs)("div",{className:b.container,children:[Object(E.jsx)(st,{filters:a,setFilters:r}),u?Object(E.jsx)("div",{children:"loading ...."}):Object(E.jsx)(K,{data:d})]})})},jt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,c=e.getLCP,r=e.getTTFB;n(t),a(t),i(t),c(t),r(t)}))},bt=n(84),ft=n(168),pt=n(76),Ot=n(166),ht=n(86),vt={light:{palette:{type:"light",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#84c887",main:"#6fbf73",dark:"#4caf50",contrastText:"#000"},background:{paper:"#fff",default:"#fafafa"},header:{main:"#03a9f4"}}},dark:{palette:{type:"dark",primary:{light:"#6573c3",main:"#3f51b5",dark:"#2c387e",contrastText:"#fff"},secondary:{light:"#6fbf73",main:"#4caf50",dark:"#357a38",contrastText:"#000"},background:{paper:"#424242",default:"#303030"},header:{main:"#03a9f4"}}}},xt=new ft.a,gt=function(){var t=Object(c.useState)("light"),e=Object(i.a)(t,2),n=e[0],a=e[1];return console.log("updated theme",n),Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsxs)(pt.a,{client:xt,children:[Object(E.jsxs)(Ot.a,{theme:Object(ht.a)(vt[n]),children:[Object(E.jsx)(I,{theme:n,setTheme:a}),Object(E.jsx)(dt,{})]}),Object(E.jsx)(bt.ReactQueryDevtools,{})]})})};s.a.render(Object(E.jsx)(gt,{}),document.getElementById("root")),jt()}},[[117,1,2]]]);
//# sourceMappingURL=main.f951f96f.chunk.js.map