(this["webpackJsonpvaccine-finder"]=this["webpackJsonpvaccine-finder"]||[]).push([[0],{101:function(t,e,n){"use strict";n.r(e);var a,i=n(0),r=n.n(i),c=n(14),o=n.n(c),s=(n(92),n(30)),l=n(20),u=n.n(l),d=n(25),j=n(155),b=n(72),f=function(t,e){return Object(b.a)(t,e)},p=function(){var t=Object(d.a)(u.a.mark((function t(e,n){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict","?district_id=").concat(e,"&date=").concat(n),{headers:{"Content-Type":"application/json"}});case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),v=n(32),O=function(t,e){var n;return(null===t||void 0===t||null===(n=t.sessions.filter((function(t){return t.min_age_limit<=e})))||void 0===n?void 0:n.length)>0},h="ABOVE_AGE_18",x="ABOVE_AGE_45",g="AVAILABLITY",m=(a={},Object(v.a)(a,h,(function(t){return O(t,18)})),Object(v.a)(a,x,(function(t){return O(t,45)})),Object(v.a)(a,g,(function(t){return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return(null===t||void 0===t?void 0:t.available_capacity)>0})).length)>0})),Object(v.a)(a,"DATE",(function(t,e){var n=f(e.date,"dd-MM-yyyy");return(null===t||void 0===t?void 0:t.sessions.filter((function(t){return t.date===n})).length)>0})),a),y=n(148),w=n(146),_=n(140),C=n(149),k=n(147),L=n(145),E=n(156),N=n(153),D=n(142),S=n(144),A=n(6),T=Object(_.a)((function(t){return{day:{height:80,width:140},centerName:{backgroundColor:"bisque",lineHeight:"1.5em",borderRadius:"4px",width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",padding:"2px"},badge:{padding:"8px"},slotContainer:{padding:"4px"}}})),B=function(t){var e=t.session;return Object(A.jsx)(D.a,{children:null===e||void 0===e?void 0:e.slots.map((function(t,e){return Object(A.jsx)(S.a,{button:!0,children:t},e)}))})},I=function(t){var e=t.center;return Object(A.jsx)(D.a,{children:null===e||void 0===e?void 0:e.sessions.map((function(t,n){return Object(A.jsxs)(S.a,{button:!0,children:["Session ".concat(n+1," - "),Object(A.jsx)(B,{session:t})]},"".concat(e.name,"-").concat(n))}))})},M=function(t){var e=t.center,n=t.onClick;return e.sessions.reduce((function(t,e){var n=t.findIndex((function(t){return t.min_age_limit===e.min_age_limit}));return-1===n?t.push({min_age_limit:e.min_age_limit,available_capacity:e.available_capacity}):t[n].available_capacity+=e.available_capacity,t}),[]).map((function(t){return Object(A.jsx)(L.a,{badgeContent:t.available_capacity||"0",color:"primary",children:Object(A.jsx)(E.a,{label:"> ".concat(t.min_age_limit),color:"default",onClick:function(t){return n(t,e)}})})}))},F=function(t){var e=t.center,n=Object(i.useState)(!1),a=Object(s.a)(n,2),r=a[0],c=a[1],o=Object(i.useState)(),l=Object(s.a)(o,2),u=l[0],d=l[1],j=T(),b=Object(i.useState)(1),f=Object(s.a)(b,2),p=f[0],v=f[1];return Object(A.jsxs)(w.a,{className:j.day,elevation:p,onMouseEnter:function(){return v(4)},onMouseLeave:function(){return v(1)},children:[Object(A.jsx)(k.a,{title:e.name,children:Object(A.jsx)("div",{className:j.centerName,children:e.name})}),Object(A.jsxs)(y.a,{container:!0,justify:"center",className:j.badge,children:[Object(A.jsx)(M,{center:e,onClick:function(t,e){d(e),Boolean(r)?c(null):c(t.currentTarget)}}),Object(A.jsx)(N.a,{id:"mouse-over-popover",open:Boolean(r),anchorEl:r,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:function(){return c(null)},disableRestoreFocus:!0,children:Object(A.jsx)(y.a,{container:!0,justify:"center",className:j.slotContainer,children:Object(A.jsx)(I,{center:u})})})]})]})},R=Object(_.a)((function(t){return{root:{flexGrow:1,padding:16},day:{height:80,width:140}}})),z=function(t){var e=t.data;return null===e||void 0===e?void 0:e.map((function(t,e){return Object(A.jsx)(y.a,{item:!0,spacing:2,children:Object(A.jsx)(F,{center:t})},e)}))},G=function(){return Object(A.jsx)(C.a,{align:"center",children:"No Centers to show"})},P=function(t){var e=t.data,n=R();return Object(A.jsx)(w.a,{className:n.root,elevation:2,children:Object(A.jsx)(y.a,{container:!0,spacing:2,justify:"center",children:(null===e||void 0===e?void 0:e.length)?Object(A.jsx)(z,{data:e}):Object(A.jsx)(G,{})})})},V=n(59),J=n(16),W=n(73),q=n(151),H=function(){var t=Object(d.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/districts","/").concat(e),{headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Q=function(){var t=Object(d.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat("https://cdn-api.co-vin.in/api/v2/admin/location/states"),{headers:{"Content-Type":"application/json"}});case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Y=n(150),K=n(154),U=Object(_.a)((function(t){return{filterContainer:{padding:"8px 0 8px 0"},filterRow:{padding:t.spacing(2)}}})),X=function(t){var e=t.label,n=t.onClick,a=(t.classes,t.className,Object(W.a)(t,["label","onClick","classes","className"])),r=Object(i.useState)(!1),c=Object(s.a)(r,2),o=c[0],l=c[1];return Object(A.jsx)(Y.a,Object(J.a)(Object(J.a)({},a),{},{size:"small",style:{margin:"4px"},variant:"contained",color:o?"primary":"default",onClick:function(t){l(!o),n&&n(t)},children:e}))},Z=function(t){var e,n,a=t.filters,i=t.setFilters,r=U(),c=function(){var t=Object(j.a)("states",(function(){return Q()}),{staleTime:1/0}),e=t.data,n=t.isLoading,a=t.isError,i=t.status;return{data:(null===e||void 0===e?void 0:e.states)||[],isLoading:n,isError:a,status:i}}(),o=c.data,s=c.isLoading,l=function(t){console.log("useDistricts",t);var e=Object(j.a)("districts-".concat(t),(function(){return H(t)}),{staleTime:1/0,enabled:!!t}),n=e.data,a=e.isLoading,i=e.isError,r=e.status;return{data:(null===n||void 0===n?void 0:n.districts)||[],isLoading:a,isError:i,status:r}}(null===a||void 0===a||null===(e=a.state)||void 0===e?void 0:e.state_id),b=l.data,p=l.isLoading,v=function(t){var e,n=null===a||void 0===a||null===(e=a.categories)||void 0===e?void 0:e.indexOf(t),r=Object(V.a)(a.categories);n>-1?(r.splice(n,1),i(Object(J.a)(Object(J.a)({},a),{},{categories:r}))):i(Object(J.a)(Object(J.a)({},a),{},{categories:[].concat(Object(V.a)(r),[t])}))};return Object(A.jsxs)(y.a,{className:r.filterContainer,container:!0,xs:12,children:[Object(A.jsxs)(y.a,{className:r.filterRow,container:!0,xs:12,justify:"flex-start",spacing:2,children:[Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(q.a,{id:"date",label:"Date",type:"date",value:a.date&&f(a.date,"yyyy-MM-dd"),InputLabelProps:{shrink:!0},onChange:function(t){console.log("date value",t),i(Object(J.a)(Object(J.a)({},a),{},{date:t.target.valueAsDate}))}})}),Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(K.a,{id:"states",disabled:s,options:o,getOptionLabel:function(t){return t.state_name},getOptionSelected:function(t,e){return t.state_id===e.state_id},style:{width:300},renderInput:function(t){return Object(A.jsx)(q.a,Object(J.a)(Object(J.a)({},t),{},{label:"State",variant:"outlined"}))},onChange:function(){var t=Object(d.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(Object(J.a)(Object(J.a)({},a),{},{state:n}));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})}),Object(A.jsx)(y.a,{item:!0,children:Object(A.jsx)(K.a,{id:"district",disabled:p,options:b,getOptionLabel:function(t){return t.district_name},getOptionSelected:function(t,e){return t.district_id===e.district_id},style:{width:300},renderInput:function(t){return Object(A.jsx)(q.a,Object(J.a)(Object(J.a)({},t),{},{label:"District",variant:"outlined"}))},onChange:function(t,e){i(Object(J.a)(Object(J.a)({},a),{},{district:e}))}},(null===a||void 0===a||null===(n=a.state)||void 0===n?void 0:n.state_id)||0)})]}),Object(A.jsxs)(y.a,{className:r.filterRow,container:!0,xs:12,justify:"flex-end",children:[Object(A.jsx)(X,{label:"18+",onClick:function(){return v(h)}}),Object(A.jsx)(X,{label:"45+",onClick:function(){return v(x)}}),Object(A.jsx)(X,{label:"Available",onClick:function(){return v(g)}})]})]})},$=Object(_.a)((function(t){return{app:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",padding:"24px"},container:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-around",width:"90vw"}}})),tt={categories:["DATE"],state:{},district:{},date:new Date};var et=function(){var t,e=Object(i.useState)(tt),n=Object(s.a)(e,2),a=n[0],r=n[1],c=function(t,e){var n=f(e,"dd-MM-yyyy"),a=Object(j.a)("slotsByDistrict-".concat(t,"-").concat(n),(function(){return p(t,n)}),{refetchInterval:6e4,enabled:!!t&&!!e}),i=a.data,r=a.isLoading,c=a.isError,o=a.status;return{data:null===i||void 0===i?void 0:i.centers,isLoading:r,isError:c,status:o}}(null===a||void 0===a||null===(t=a.district)||void 0===t?void 0:t.district_id,a.date),o=c.data,l=c.isLoading,u=function(t,e){return function(t,e,n){if((null===t||void 0===t?void 0:t.length)>0)return t.filter((function(t){return-1===n.map((function(n){return n(t,e)})).indexOf(!1)}))}(t,e,e.categories.map((function(t){return m[t]})))}(o,a),d=$();return Object(A.jsx)("div",{className:d.app,children:Object(A.jsxs)("div",{className:d.container,children:[Object(A.jsx)(Z,{filters:a,setFilters:r}),l?Object(A.jsx)("div",{children:"loading ...."}):Object(A.jsx)(P,{data:u})]})})},nt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),r(t),c(t)}))},at=n(71),it=n(152),rt=n(63),ct=new it.a;o.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsxs)(rt.a,{client:ct,children:[Object(A.jsx)(et,{}),Object(A.jsx)(at.ReactQueryDevtools,{})]})}),document.getElementById("root")),nt()},92:function(t,e,n){}},[[101,1,2]]]);
//# sourceMappingURL=main.d1c3021c.chunk.js.map